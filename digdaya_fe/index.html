<!DOCTYPE html>
<!--[if IE 9]> <html class="ie9 no-js" lang="en"> <![endif]-->
<!--[if (gt IE 9)|!(IE)]><!-->
<html class="no-js" lang="en">
<!--<![endif]-->

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Beranda</title>
  <!-- <link rel="stylesheet" href="http://localhost:3000/css/bootstrap4/dist/css/bootstrap-custom.css?v=datetime"> -->
  <link rel="stylesheet" href="css/polished.min.css">
  <!-- <link rel="stylesheet" href="polaris-navbar.css"> -->
  <link rel="stylesheet" href="css/iconic/css/open-iconic-bootstrap.min.css">

  <link rel="icon" href="assets/polished-logo-small.png">

  <style>
    .grid-highlight {
      padding-top: 1rem;
      padding-bottom: 1rem;
      background-color: #5c6ac4;
      border: 1px solid #202e78;
      color: #fff;
    }

    hr {
      margin: 6rem 0;
    }

    hr+.display-3,
    hr+.display-2+.display-3 {
      margin-bottom: 2rem;
    }
  </style>
  <script type="text/javascript">
    document.documentElement.className = document.documentElement.className.replace('no-js', 'js') + (document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? ' svg' : ' no-svg');
  </script>
  <!-- Facebook Pixel Code -->
  <script>
    !function(f,b,e,v,n,t,s)
    {if(f.fbq)return;n=f.fbq=function(){n.callMethod?
    n.callMethod.apply(n,arguments):n.queue.push(arguments)};
    if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
    n.queue=[];t=b.createElement(e);t.async=!0;
    t.src=v;s=b.getElementsByTagName(e)[0];
    s.parentNode.insertBefore(t,s)}(window, document,'script',
    'https://connect.facebook.net/en_US/fbevents.js');
    fbq('init', '564839313686027');
    fbq('track', 'PageView');
  </script>
  <noscript><img height="1" width="1" style="display:none"
    src="https://www.facebook.com/tr?id=564839313686027&ev=PageView&noscript=1"
  /></noscript>
  <!-- End Facebook Pixel Code -->

</head>

<body>

    <nav class="navbar navbar-expand p-0">
     <a class="navbar-brand text-center col-xs-12 col-md-3 col-lg-2 mr-0" href="index.html">         <img src="assets/polished-logo-small.png" alt="logo" width="42px">         REST API Test</a>
      <button class="btn btn-link d-block d-md-none" data-toggle="collapse" data-target="#sidebar-nav" role="button" >
        <span class="oi oi-menu"></span>
      </button>
      
      <input class="border-dark bg-primary-darkest form-control d-none d-md-block w-50 ml-3 mr-2" type="text" placeholder="Search" aria-label="Search">
      <div class="dropdown d-none d-md-block">
        <button class="btn btn-link btn-link-primary dropdown-toggle" id="navbar-dropdown" data-toggle="dropdown">
          Muhammad Thaariq
        </button>
        <div class="dropdown-menu dropdown-menu-right" id="navbar-dropdown">
          <a href="#" class="dropdown-item">Profile</a>
          <a href="#" class="dropdown-item">Setting</a>
          <div class="dropdown-divider"></div>
          <a href="#" class="dropdown-item">Sign Out</a>
        </div>
      </div>
    </nav>

<div class="container-fluid h-100 p-0">
  <div style="min-height: 100%" class="flex-row d-flex align-items-stretch m-0">
    <div class="polished-sidebar bg-light col-12 col-md-3 col-lg-2 p-0 collapse d-md-inline" id="sidebar-nav">
      <ul class="polished-sidebar-menu ml-0 pt-4 p-0 d-md-block">
        <input class="border-dark form-control d-block d-md-none mb-4" type="text" placeholder="Search" aria-label="Search" />
        <li class="active"><a href="index.html"><span class="oi oi-home"></span> Home</a></li>
        <li><a href="tambah-pengguna.html"><span class="oi oi-person"></span> Tambah Pengguna</a></li>
        <div class="d-block d-md-none">
          <div class="dropdown-divider"></div>
          <li><a href="#"> Profile</a></li>
          <li><a href="#"> Setting</a></li>
          <li><a href="#"> Sign Out</a></li>
        </div>
      </ul>
      <div class="pl-3 d-none d-md-block position-fixed" style="bottom: 0px">
        <span class="oi oi-cog"></span> Setting
      </div>
    </div>
    <div class="col-lg-10 col-md-9 p-4">
      <div class="row ">
        <div class="col-md-12 pl-3 pt-2">
          <div class="pl-3">
            <h3>Dashboard</h3>
          </div>
        </div>
      </div>
      <div class="row pl-3 pt-2 mb-5">
        <div class="col-lg-12 pl-3">
          <table class="table table-hover">
            <thead class="border-0">
              <tr>
                <th scope="col">#</th>
                <th scope="col">Nama</th>
                <th scope="col">Email</th>
                <th scope="col">Nomor HP</th>
                <th scope="col">Domisili</th>
                <th>Tindakan</th>
              </tr>
            </thead>
            <tbody id="tableBody">
            </tbody>
          </table>
        </div>  
      </div>
    </div>
  </div>
</div>

  <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
  <!--   <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.bundle.min.js"></script>
 -->
  <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
  <script src="js/axios.min.js"></script>
  <script>
    axios.get('http://localhost:8000/api/pengguna')
      .then((response)=>{
        let finalData = response.data
        let tableData = ""
        let no = 1;
        finalData.data.map( (values) => {
          console.log(values)
          tableData += `<tr>`;
          tableData += `<td>${no++}</td>`;
          tableData += `<td>${values.name}</td>`;
          tableData += `<td>${values.email}</td>`;
          tableData += `<td>${values.nomor_hp}</td>`;
          tableData += `<td>${values.domisili}</td>`;
          tableData += `<td>
              <a href="detail_pengguna.html?id=${values.id}" class="btn btn-primary">Ubah</a>
<button type="submit" class="btn btn-danger" onClick="hapus(${values.id})">Hapus</button>
            </td>`;
          tableData += `</tr>`;
        } )
        document.getElementById("tableBody").innerHTML = tableData;
      })
  </script>
  <script>
    async function hapus(id){
      window.alert('anda yakin ingin menghapus?')
      await axios({
        method: 'DELETE',
        url: `http://localhost:8000/api/pengguna/${id}`,
        data: null
      }).then((response) => {
        location.reload()
      })
    }
  </script>
  
</body>

</html>
